# 속담 맞추기 게임 (AI 유사도 기반)

## 게임 개요
- MySQL DB에 저장된 속담 데이터를 활용하여, 앞부분(문제)을 보고 뒷부분(정답)을 맞추는 게임입니다.
- 사용자의 입력과 정답(속담 뒷부분) 간의 의미 유사도를 AI 모델(Sentence-BERT, ko-sbert-nli)로 판별합니다.

## 게임 규칙
1. **총 제한시간**: 60초
   - 60초 안에 최대한 많은 문제를 맞추는 것이 목표입니다.
2. **문제 출제**
   - 각 문제는 속담의 앞부분(문제)이 제시됩니다.
   - 사용자는 뒷부분(정답)을 입력합니다.
3. **정답 판별**
   - 사용자의 입력과 정답의 의미 유사도가 임계값(threshold) 이상이면 정답으로 인정합니다.
4. **점수**
   - 제한시간 내에 맞춘 문제 수에 따라 점수가 올라갑니다.
5. **힌트 제공**
   - 문제당 1회 오답 시, 또는 10초가 지나면 해당 문제의 힌트가 자동으로 표출됩니다. 이때 정답은 표출되지 않습니다.
6. **문제 건너뛰기**
   - 사용자는 원할 때마다 "다음 문제"로 건너뛸 수 있습니다.
7. **2회 오답 시**
   - 한 문제에서 2회 오답을 입력하면 정답 보여주며 자동으로 다음 문제로 넘어갑니다.

## 정답 임계치 상세설정
정답의 글자수가 2자 이하인 경우 정답 임계치가 0.5
정답의 글자수가 3자인 경우 정답 임계치 0.55
정답의 글자수가 4자인 경우 정답 임계치가 0.6
정답의 글자수가 5자인 경우 정답 임계치가 0.65
정답의 글자수가 6자 이상 7자 이하인 경우 정답 임계치가 0.7
정답의 글자수가 8자 이상 10자 이하인 경우 정답 임계치가 0.75
정답의 글자수가 11자 이상인 경우 정답 임계치가 0.8

## AI 유사도 판별 방식
- Sentence-BERT(ko-sbert-nli) 모델을 사용하여, 사용자의 입력과 모든 정답(속담 뒷부분) 임베딩을 비교합니다.
- 코사인 유사도(cosine similarity) 기준으로 임계값(threshold) 이상일 때 정답 처리합니다.
- threshold 값은 실험적으로 조정 가능하며, 높을수록 더 정확히 일치해야 정답으로 인정됩니다.

## 예시 코드 (핵심 로직)
```python
from sentence_transformers import SentenceTransformer, util
model = SentenceTransformer('jhgan/ko-sbert-nli')
user_input = "호랑이 얘기하면 나타난다"
answers = ["호랑이도 제 말 하면 온다", ...]  # DB에서 불러온 정답 리스트
embeddings = model.encode([user_input] + answers)
similarities = util.cos_sim(embeddings[0], embeddings[1:])[0]
max_idx = similarities.argmax()
if similarities[max_idx] > 0.8:
    print("정답!")
else:
    print("오답!")
```

## 참고
- DB 구조, AI 모델, 게임 흐름 등은 `proverb_game.py` 파일을 참고하세요.
